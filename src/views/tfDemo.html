<html>
  <head>
    <!-- 这里加载官方的Tf.js库文件 -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.11.7"> </script>
    <!-- 简单概念 张量 变量 操作 -->
    <!-- Place your code in the script tag below. You can also use an external .js file -->
    <script>
      //张量
      // 1阶张量
      tf.tensor1d([1, 2, 3]).print()
      // 2阶张量
      tf.tensor2d([1, 2, 3, 4], [2, 2]).print()
      // 3阶张量
      tf.tensor3d([1, 2, 3, 4], [2, 2, 1]).print()
      // 4阶张量
      tf.tensor4d([1, 2, 3, 4], [1, 2, 2, 1]).print()
      //0或1
      tf.zeros([3,5]).print()
      tf.ones([2,4]).print()

      //变量
      const initialValues = tf.zeros([5]);//[0,0,0,0,0]
      const biases = tf.variable(initialValues); // 初始化偏差（距离原点的截距或偏移）
      tf.variable(tf.randomNormal([3, 2])).print()//随机
      biases.assign(tf.tensor1d([1,3,5,7,9])) //更新数据
      biases.print();

      //操作
      /** 
       * data.square() 数学函数平方
       * data.sqrt() 数学函数开方
       * data.add() 运算函数
       * 所有操作可链式操作
      */
     const data=tf.tensor1d([1, 2, 3])
     data.add(tf.tensor1d([1,2,3])).add(tf.tensor1d([1,2,3])).print()

     //模型和层
      // 定义线性回归模型。2种实现形式
      let model
      if(true){
        model = tf.sequential();
        model.add(
          tf.layers.dense(
            {
              units: 1,
              inputShape: [1]//第一层必传
            }
          )
        );
      }else{
        model = tf.sequential({
          layers: [
            tf.layers.dense({inputShape: [784], units: 32, activation: 'relu'}),
            tf.layers.dense({units: 10, activation: 'softmax'}),
          ]
        })
      }
      // 为培训准备模型:指定损失和优化器。
      model.compile({loss: 'meanSquaredError', optimizer: 'sgd'});//sgd优化器
      // 生成一些训练用的合成数据。
      const xs = tf.tensor2d([1, 2, 3, 4], [4, 1]);
      const ys = tf.tensor2d([1, 3, 5, 7], [4, 1]);
      // Train the model using the data.
      model.fit(xs, ys, {epochs: 10}).then(() => {
        // 使用模型对模型未见过的数据点进行推断:
        // 打开浏览器devtools查看输出
        model.predict(tf.tensor2d([5], [1, 1])).print();
      });

    </script>
  </head>

  <body>
  </body>
</html>